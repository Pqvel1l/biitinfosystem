<!doctype html>
<html lang="ru">
<head>
  {% load static %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<body class="bg-primary text-light">
<center>
 <img src="{% static 'images/white.png' %}" align="center" alt="Логотип" style="margin-right: 10px;">
  </center>
<!-- Навигационное меню -->
  <nav class="navbar navbar-expand-lg ">
      <div class="container-fluid navbar-custom">
        <a class="navbar-brand" href="{% url 'index' %}" style="color: #ffffff; font-size: 20px">Информационная система</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent"> <!-- Добавлен Justify-content-end для перемещения кнопок вправо!--> <!---->
          <ul class="navbar-nav mb-2 mb-lg-0"  >
              {% if not request.session.user %}
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'login' %} "style="font-size: 20px;">Войти</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'signup' %}"style="font-size: 20px">Зарегистрироваться</a>
                </li>
              {% else %}
                {% if request.session.user.is_admin %}
                {% endif %}
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'settings' %}"style="font-size: 20px">Настройки</a>
                </li>
                <li class="nav-item" >
                  <a class="nav-link" href="{% url 'logout' %}"style="font-size: 20px">Выйти</a>
                </li>
              {% endif %}
          </ul>
        </div>
      </div>
    </nav>

  <!-- Приветственное сообщение и инструкции -->
  <div class="container mt-5 border border-success">
    <div class="welcome-message bg-light text-dark p-4 rounded">
      <h2>Добро пожаловать на наш сайт обмена файлами!</h2>
      <p>Здесь вы можете найти все необходимые учебные материалы, предоставленные администрацией. Если вы студент, вы можете легко скачать себе необходимые файлы. Важно помнить, что обычные пользователи не могут публиковать файлы, это право ограничено администрацией.</p>
      <p>Для начала работы с сайтом, пожалуйста, зарегистрируйтесь или войдите в свой аккаунт. Это даст вам доступ к загрузкам и дополнительным ресурсам. Пользуйтесь поиском для нахождения конкретных материалов. Если у вас возникнут вопросы, не стесняйтесь обращаться за помощью!</p>
    </div>
  </div>
  {% block body %}
  {% endblock %}
  <!-- Футер -->
  <footer class="text-center mt-10 bg-dark text-light">
    <!-- Копирайт -->
    <div class="site-info">
      ©Copyright <a href="http://biit39.ru" target="_blank" style="color: #ffffff;">АНО ПО "БИТ"</a>
    </div>
  </footer>
<script>
function saveState(isPrimary) {
    localStorage.setItem('isPrimaryBackground', isPrimary);
}

// Загружаем сохраненное состояние фона
function loadState() {
    const isPrimary = localStorage.getItem('isPrimaryBackground') === 'true';
    updateBackgroundAndLogo(isPrimary);
}

// Обновляем фон и логотип в соответствии с состоянием
function updateBackgroundAndLogo(isPrimary) {
    const body = document.body;
    const toggleCircle = document.querySelector('.toggle-circle'); // Получаем элемент кружка
    const imgSrc = isPrimary ? '{% static "images/white.png" %}' : '{% static "images/blue.png" %}';
    const bgColorClassToAdd = isPrimary ? 'bg-primary' : 'bg-white';
    const bgColorClassToRemove = isPrimary ? 'bg-white' : 'bg-primary';
    const circleColor = isPrimary ? "#007bff" : "#ffffff"; // Синий для синего фона, белый для белого фона
    
    body.classList.add(bgColorClassToAdd);
    body.classList.remove(bgColorClassToRemove);
    document.querySelector('img').src = imgSrc;
     toggleCircle.style.backgroundColor = circleColor;
    // Сохраняем состояние после обновления
    saveState(isPrimary);
}

// Переключаем фон и логотип
function toggleBackground() {
    const isPrimary = !document.body.classList.contains('bg-primary');
    updateBackgroundAndLogo(isPrimary);
}

// Вызываем loadState при загрузке страницы
document.addEventListener('DOMContentLoaded', loadState);
</script> <!-- Это же ДЖАВАСКРИИИИПТ!!!! -->

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>
</html>
